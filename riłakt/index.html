<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hello World</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- Don't use this in production: -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">

        let UserComponent = function(){return <></>}

        function executeCode(){
            let textInput = document.getElementById('code')
            let inputValue = textInput.value
            try{
                let App = false;
                eval(inputValue)
                console.log(App)

                if(typeof App == 'function'){
                    UserComponent = App
                }
                
            }
            catch(e){
                
                alert(e)
            }
        }

        function Header(props){
            return <h1 className='text-sky-500 text-2xl my-3'>{props.text}</h1>
        }
    
      function MyApp() {
        let [state, setState] = React.useState(true)
        setTimeout(()=>{setState(!state)}, 200)
        return (
            <div className='text-center mx-auto m-2'>
                <Header text='App header'/>
                <div className='flex mx-auto w-3/4'>
                    <div className=' w-1/2 bg-sky-500 p-2'>
                        <div className='bg-white p-2'>
                            <Header text='Write code here'/>
                            <textarea id='code' rows='20' cols='50' className=' p-2 caret-sky-500 border-sky-500 rounded-xl border-2'>
                                
                            </textarea>
                            <Header text='Execute code'/>
                            <button onClick={executeCode} className='bg-sky-500 p-2 rounded-xl'>
                                Execute
                            </button>
                        </div>
                    </div>
                    <div className=' w-1/2 bg-sky-500 p-2'>
                        <div id='app_preview' className='bg-white h-full w-full text-left'>
                            <UserComponent/>
                            </div>
                    </div>
                </div>
            </div>
        );
      }
      let x = 0;
      let code = 'x = 1;'
      const F = new Function(code)
      F();

      //alert(x)

      const container = document.getElementById('root');
      const root = ReactDOM.createRoot(container);
      root.render(<MyApp />);

    </script>
    <!--
      Note: this page is a great way to try React but it's not suitable for production.
      It slowly compiles JSX with Babel in the browser and uses a large development build of React.

      Read this section for a production-ready setup with JSX:
      https://reactjs.org/docs/add-react-to-a-website.html#add-jsx-to-a-project

      In a larger project, you can use an integrated toolchain that includes JSX instead:
      https://reactjs.org/docs/create-a-new-react-app.html

      You can also use React without JSX, in which case you can remove Babel:
      https://reactjs.org/docs/react-without-jsx.html
    -->
  </body>
</html>